<!DOCTYPE html>
<html class="writer-html5" lang="hpopt" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to write hpo_config.yaml &mdash; hpopt 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> hpopt
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contents/intro.html">What is hpopt?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/using.html">Using hpopt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents/apis.html">HpOpt API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hpopt</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>How to write hpo_config.yaml</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/hpo_ote/hpo_config.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-write-hpo-config-yaml">
<h1>How to write hpo_config.yaml<a class="headerlink" href="#how-to-write-hpo-config-yaml" title="Permalink to this heading"></a></h1>
<p>HPO is configured by reading <strong>hpo_config.yaml</strong>
-- a yaml file that contains everything related to HPO including hyper prameters to optimize, HPO algorithm, etc..
<em>hpo_config.yaml</em> already exists with default value in same directory where <em>template.yaml</em> which is essential to run ote resides.
So, you can modify how HPO will run based on this file.</p>
<p>Here is <em>hpo_config.yaml</em> provided for classification.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metric</span><span class="p">:</span> <span class="n">mAP</span>
<span class="n">search_algorithm</span><span class="p">:</span> <span class="n">smbo</span>
<span class="n">early_stop</span><span class="p">:</span> <span class="n">median_stop</span>
<span class="n">hp_space</span><span class="p">:</span>
  <span class="n">learning_parameters</span><span class="o">.</span><span class="n">learning_rate</span><span class="p">:</span>
    <span class="n">param_type</span><span class="p">:</span> <span class="n">quniform</span>
    <span class="nb">range</span><span class="p">:</span> 
      <span class="o">-</span> <span class="mf">0.001</span>
      <span class="o">-</span> <span class="mf">0.01</span>
      <span class="o">-</span> <span class="mf">0.001</span>
  <span class="n">learning_parameters</span><span class="o">.</span><span class="n">batch_size</span><span class="p">:</span>
    <span class="n">param_type</span><span class="p">:</span> <span class="n">qloguniform</span>
    <span class="nb">range</span><span class="p">:</span> 
      <span class="o">-</span> <span class="mi">8</span>
      <span class="o">-</span> <span class="mi">64</span>
      <span class="o">-</span> <span class="mi">2</span>
</pre></div>
</div>
<p>As you can see, There are some attributes needed to run HPO.
Fortunately, there is not much attribute. It's not difficulty to write your own file.
More detailed description is as bellow.</p>
<section id="attribute">
<h2>Attribute<a class="headerlink" href="#attribute" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><strong>hp_space</strong> (<em>List[Dict[str, Any]]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) - Hyper parameter search space to find. It should be list of dictionary. Each has hyper parameter name as key and param_type and range as vaule.</p>
<ul>
<li><p><em><strong>available hyper parameters</strong></em></p>
<ul>
<li><p>avaiable to both classification and detection</p>
<ul>
<li><p>learning_parameters.learninig_rate</p></li>
<li><p>learning_parameters.batch_size</p></li>
</ul>
</li>
<li><p>available to detection</p>
<ul>
<li><p>learning_parameters.learning_rate_warmup_iters</p></li>
</ul>
</li>
</ul>
</li>
<li><p><em><strong>Keys of each hyper parameter</strong></em></p>
<ul>
<li><p><em><strong>param_type</strong></em> (<em>str</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : Hyper parameter search space type. Must be one of bellows.</p>
<ul>
<li><p>uniform : Sample a float value uniformly between lower and upper.</p></li>
<li><p>quniform : Sample a quantized float value uniformly between lower and upper.</p></li>
<li><p>loguniform : Sample a float value after scaling search space by log scale.</p></li>
<li><p>qloguniform : Sample a quantized float value after scaling search space by log scale.</p></li>
<li><p>choice : Sample a categorical value.</p></li>
</ul>
</li>
<li><p><em><strong>range</strong></em> (<em>List[Any]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : Each <em>param_type</em> has a respective format.</p>
<ul>
<li><p>uniform : List[Union[float, int]]</p>
<ul>
<li><p>lower (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : lower bound of search space.</p></li>
<li><p>upper (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : upper bound of search space.</p></li>
</ul>
</li>
<li><p>quniform : List[Union[float, int]]</p>
<ul>
<li><p>lower (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : lower bound of search space.</p></li>
<li><p>upper (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : upper bound of search space.</p></li>
<li><p>q (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : unit value of search space.</p></li>
</ul>
</li>
<li><p>loguniform : List[Union[float, int])</p>
<ul>
<li><p>lower (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : lower bound of search space.</p></li>
<li><p>upper (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : upper bound of search space.</p></li>
<li><p>base (<em>Union[float, int]</em>, <em>default=10</em>) : The logarithm base.</p></li>
</ul>
</li>
<li><p>qloguniform : List[Union[float, int]]</p>
<ul>
<li><p>lower (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : lower bound of search space</p></li>
<li><p>upper (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : upper bound of search space</p></li>
<li><p>q (<em>Union[float, int]</em>, <code class="docutils literal notranslate"><span class="pre">required</span></code>) : unit value of search space</p></li>
<li><p>base (<em>Union[float, int]</em>, <em>default=10</em>) : The logarithm base.</p></li>
</ul>
</li>
<li><p>choice : List[Any]</p>
<ul>
<li><p>vaule : value to be chosen from candidates.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>metric</strong> (<em>str</em>, <em>default='mAP</em>') - Metric name for HPO.</p></li>
<li><p><strong>serach_algorhtim</strong> (<em>str</em>, <em>default=‘baye_opt’</em>) - Must be one of [‘baye_opt’, ‘asha’]. Search algorithm used for optimizing hyper parmaeters.</p></li>
<li><p><strong>early_stop</strong> (<em>str</em>, <em>default=None</em>) - Choice of early stopping methods. Currently ‘median_stop’ is supported.</p></li>
<li><p><strong>max_iterations</strong> (<em>int</em>, <em>default=None</em>) - Max training epoch for each trials. hpopt will stop training after iterating ‘max_iterations’ times.</p></li>
<li><p><strong>subset_ratio</strong> (<em>Union[float, int]</em>, <em>default=None</em>) - The ratio of dataset size for HPO task. If this value is greater than or equal to 1.0, full dataset is used for HPO task. When it makes dataset size lower than 500, Dataset size is set to 500.</p></li>
<li><p><strong>num_init_trials</strong> (<em>int</em>, <em>default=5</em>) - Only for SMBO. How many trials to use to init SMBO.</p></li>
<li><p><strong>num_trials</strong> (<em>int</em>, <em>default=None</em>) - Number of times to sample from the hyperparameter space. It should be greater than or equal to 1. If set to None, it’s set automatically.</p></li>
<li><p><strong>num_brackets</strong> (<em>int</em>, <em>default=None</em>) - Only for ASHA. Number of brackets. Each bracket has a different halving rate, specified by the reduction factor.</p></li>
<li><p><strong>min_iterations</strong> (<em>int</em>, <em>default=None</em>) - Only for ASHA. hpopt will run training at least ‘min_iterations’ times.</p></li>
<li><p><strong>reduction_factor</strong> (<em>float</em>, <em>default=2</em>) - Only for ASHA. Used to set halving rate and amount.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>